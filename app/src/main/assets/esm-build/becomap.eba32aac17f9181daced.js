"use strict";(this.webpackChunkbecomap=this.webpackChunkbecomap||[]).push([[807],{6100:(t,e,i)=>{i.d(e,{K:()=>a});var o=i(1357);class a{constructor(t,e){var i,a,s,r,n,l,h;this.type=e.type,this.properties={id:t,floorId:e.properties.floorId||"",type:"Polygon",selected:!1,color:(null===(i=e.properties.shapeProperties)||void 0===i?void 0:i.color)||"#F7F7F7",height:(null===(a=e.properties.shapeProperties)||void 0===a?void 0:a.height)||0,opacity:(null===(s=e.properties.shapeProperties)||void 0===s?void 0:s.opacity)||1,hoverColor:(0,o.e$)(.2,(null===(r=e.properties.shapeProperties)||void 0===r?void 0:r.color)||"#FFFFFF"),borderColor:(0,o.e$)(.2,(null===(n=e.properties.shapeProperties)||void 0===n?void 0:n.color)||"#FFFFFF"),label:(null===(l=e.properties.shapeProperties)||void 0===l?void 0:l.label)||null,fillColor:(null===(h=e.properties.shapeProperties)||void 0===h?void 0:h.fillColor)||null,locationName:null,locationLogo:null},this.geometry=e.geometry}setLocationNameAndLogo(t,e){this.properties.locationName=t,this.properties.locationLogo=e}getBaseLineFeature(){return{type:"Feature",properties:structuredClone(this.properties),geometry:{type:"LineString",coordinates:this.geometry.coordinates[0]}}}updateType(t){this.properties.type=t}updateGeometry(t){this.geometry=t}updateHeight(t){this.properties.height=t}}},7770:(t,e,i)=>{i.d(e,{e:()=>Ve});var o,a,s,r,n,l,h,c,d,f,u,p,g,v,m,w,y,E=i(2661),x=i.n(E),C=(i(6144),i(4330)),A=i(2837),I=i(4951),b=i(9002),M=function(t,e,i,o){return new(i||(i=Promise))((function(a,s){function r(t){try{l(o.next(t))}catch(t){s(t)}}function n(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,n)}l((o=o.apply(t,e||[])).next())}))},T=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)},S=function(t,e,i,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(t,i):a?a.value=i:e.set(t,i),i};class k{constructor(){o.add(this),a.set(this,new Map),s.set(this,null),this.activeMarker=null,r.set(this,{arrow:"ROUTE_ARROW",blueDot:"BLUE_DOT_ICON",animatingMarker:"PERSON"}),n.set(this,{active:"active-source",inactive:"inactive-source",startingPoint:"starting-point-source",animationPath:"animation-path-source"}),l.set(this,{active:"active-path-layer",inactive:"inactive-path-layer",borderActive:"active-path-layer-b",borderInactive:"inactive-path-layer-b",arrow:"route-arrow",startingPoint:"starting-point-layer",animationPath:"animation-path-layer"}),h.set(this,[{sourceID:T(this,n,"f").inactive,layerID:T(this,l,"f").borderInactive,color:"#3796F5",coveredColor:"#7D8087",width:b.v.LINE_FULL_WIDTH_PARAM},{sourceID:T(this,n,"f").inactive,layerID:T(this,l,"f").inactive,color:"#C1D1F6",coveredColor:"#CCC9DA",width:b.v.LINE_WIDTH_PARAM},{sourceID:T(this,n,"f").active,layerID:T(this,l,"f").borderActive,color:"#014EE9",coveredColor:"#7D8087",width:b.v.LINE_FULL_WIDTH_PARAM},{sourceID:T(this,n,"f").active,layerID:T(this,l,"f").active,color:"#0C97FE",coveredColor:"#CCC9DA",width:b.v.LINE_WIDTH_PARAM}])}get map(){return A.A.getInstance().map}initializeLayers(t){return M(this,void 0,void 0,(function*(){T(this,h,"f").forEach((({sourceID:t,layerID:e,color:i,coveredColor:a,width:s})=>{T(this,o,"m",v).call(this,t),T(this,o,"m",m).call(this,e,t,i,a,s)})),yield T(this,o,"m",f).call(this,t),T(this,o,"m",p).call(this,T(this,n,"f").active,T(this,l,"f").arrow),T(this,o,"m",g).call(this),T(this,o,"m",u).call(this)}))}showRouteForFloor(t){this.activeMarker&&(this.activeMarker.remove(),this.activeMarker=null),T(this,a,"f").forEach(((e,i)=>{e.forEach((e=>{const o=e.getElement();o.style.display=i===t?"block":"none"}))})),this.map.setFilter(T(this,l,"f").active,["==",["get","floorId"],t]),this.map.setFilter(T(this,l,"f").inactive,["==",["get","floorId"],t]),this.map.setFilter(T(this,l,"f").borderActive,["==",["get","floorId"],t]),this.map.setFilter(T(this,l,"f").borderInactive,["==",["get","floorId"],t]),this.map.setFilter(T(this,l,"f").arrow,["==",["get","floorId"],t]),this.map.setFilter(T(this,l,"f").startingPoint,["==",["get","floorId"],t])}updateInactivePath(t){T(this,o,"m",v).call(this,T(this,n,"f").inactive,t)}updateActivePath(t){T(this,o,"m",v).call(this,T(this,n,"f").active,t);const e=null==t?void 0:t.filter((t=>{var e;return!0!==(null===(e=null==t?void 0:t.properties)||void 0===e?void 0:e.covered)}));T(this,o,"m",c).call(this,e[0])}drawActivePath(t,e){T(this,o,"m",d).call(this,T(this,n,"f").active,t,3),T(this,o,"m",v).call(this,T(this,n,"f").inactive,e)}createWaypointMarkers(t,e,i){T(this,a,"f").forEach((t=>t.forEach((t=>t.remove())))),T(this,a,"f").clear(),t.forEach((t=>{var i;const{floorId:o,amenity:s,start:r,label:n}=t.properties||{};if(!r&&"none"!==s)return;let l;if(r)l=new(x().Marker)({color:"#28A745"}).setLngLat(t.geometry.coordinates).addTo(this.map);else if("destination"===n)l=new(x().Marker)({color:"#DF4A43"}).setLngLat(t.geometry.coordinates).addTo(this.map);else if("none"===s){const e=document.createElement("div");e.style.maxWidth="100px",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="center",e.style.justifyContent="center";const i=document.createElement("div");i.style.backgroundPosition="center 5px",i.style.backgroundColor="#2266FF",i.style.backgroundSize="25px",i.style.borderRadius="0",i.style.backgroundRepeat="no-repeat",i.style.boxShadow="rgba(74, 74, 74, 0.32) 0px 0px 20px 0px",i.style.flex="0 0 44px",i.style.width="38px",i.style.height="44px",i.style.webkitClipPath="path('M38,19a18.573,18.573,0,0,1-.456,4.142,18.96672,18.96672,0,0,1-13.338,14.12579,4.67762,4.67762,0,0,0-2.02067,1.22551L19,41.686l-3.1854-3.19271a4.67762,4.67762,0,0,0-2.02067-1.22551A18.96672,18.96672,0,0,1,.456,23.142,18.573,18.573,0,0,1,0,19a19,19,0,0,1,38,0Z')",i.style.clipPath="path('M38,19a18.573,18.573,0,0,1-.456,4.142,18.96672,18.96672,0,0,1-13.338,14.12579,4.67762,4.67762,0,0,0-2.02067,1.22551L19,41.686l-3.1854-3.19271a4.67762,4.67762,0,0,0-2.02067-1.22551A18.96672,18.96672,0,0,1,.456,23.142,18.573,18.573,0,0,1,0,19a19,19,0,0,1,38,0Z')",i.style.position="relative";const o=document.createElement("span");o.innerText=n||"",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.height="28px",o.style.width="28px",o.style.background="#fff",o.style.borderRadius="50px",o.style.position="relative",o.style.left="5px",o.style.top="5px",o.style.fontWeight="800",o.style.fontSize="16px",o.style.color="#393939",o.style.lineHeight="29px",i.appendChild(o),e.appendChild(i),l=new(x().Marker)({element:i,anchor:"bottom"}).setLngLat(t.geometry.coordinates).addTo(this.map)}else l=new(x().Marker)({color:"#DF4A43"}).setLngLat(t.geometry.coordinates).addTo(this.map);l.getElement().style.display=o===e?"block":"none",T(this,a,"f").has(o)||T(this,a,"f").set(o,[]),null===(i=T(this,a,"f").get(o))||void 0===i||i.push(l)}))}clearRoutePath(){this.activeMarker&&(this.activeMarker.remove(),this.activeMarker=null),Object.values(T(this,n,"f")).forEach((t=>T(this,o,"m",v).call(this,t,[]))),T(this,a,"f").forEach((t=>t.forEach((t=>t.remove())))),T(this,a,"f").clear()}}a=new WeakMap,s=new WeakMap,r=new WeakMap,n=new WeakMap,l=new WeakMap,h=new WeakMap,o=new WeakSet,c=function(t){var e;if(!t||0===t.geometry.coordinates.length)return void T(this,o,"m",v).call(this,T(this,n,"f").startingPoint,[]);const i={type:"Feature",geometry:{type:"Point",coordinates:t.geometry.coordinates[0]},properties:{floorId:(null===(e=t.properties)||void 0===e?void 0:e.floorId)||null}},a=this.map.getSource(T(this,n,"f").startingPoint),s={type:"FeatureCollection",features:[i]};a?a.setData(s):this.map.addSource(T(this,n,"f").startingPoint,{type:"geojson",data:s})},d=function(t,e,i){if(0===(null==e?void 0:e.length))return;const a=null==e?void 0:e.map((t=>({type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:t.properties})));let s=0,r=0;const n=()=>{var l,h;const c=null===(h=null===(l=e[s])||void 0===l?void 0:l.geometry)||void 0===h?void 0:h.coordinates;if(r<(null==c?void 0:c.length)){const e=null==c?void 0:c.slice(0,r+i);a[s].geometry.coordinates=e,r+=i,T(this,o,"m",v).call(this,t,a),requestAnimationFrame(n)}else if(s<e.length-1)s++,r=0,requestAnimationFrame(n);else{null==e||e.flatMap((t=>{var e;return null===(e=null==t?void 0:t.geometry)||void 0===e?void 0:e.coordinates}))}};n()},f=function(t){return M(this,void 0,void 0,(function*(){yield t.addImageToMap(T(this,r,"f").animatingMarker,"https://backend-lightning-prod.s3.ap-southeast-1.amazonaws.com/assets/router.svg"),yield t.addImageToMap(T(this,r,"f").arrow,"https://beco-sdks.s3.ap-south-1.amazonaws.com/sample/arrow.png"),yield t.addImageToMap(T(this,r,"f").blueDot,"https://beco-sdks.s3.ap-south-1.amazonaws.com/sample/blue-dot-3.svg")}))},u=function(){const t=T(this,n,"f").animationPath,e=(T(this,l,"f").animationPath,{type:"FeatureCollection",features:[]});if(this.map.getSource(t))throw new Error(`Source with ID "${t}" exists.`);this.map.addSource(t,{type:"geojson",data:e}),this.map.getLayer(T(this,l,"f").animationPath)&&this.map.removeLayer(T(this,l,"f").animationPath),this.map.addLayer({id:T(this,l,"f").animationPath,type:"symbol",source:T(this,n,"f").animationPath,layout:{"icon-image":T(this,r,"f").animatingMarker,"icon-size":.8,"icon-anchor":"bottom","icon-allow-overlap":!0,"icon-rotate":0,"icon-ignore-placement":!0,"symbol-sort-key":100}},A.A.getInstance().lastPolygonLayer)},p=function(t,e){T(this,o,"m",y).call(this,e,t)},g=function(){T(this,o,"m",v).call(this,T(this,n,"f").startingPoint),this.map.getLayer(T(this,l,"f").startingPoint)&&this.map.removeLayer(T(this,l,"f").startingPoint),this.map.addLayer({id:T(this,l,"f").startingPoint,type:"symbol",source:T(this,n,"f").startingPoint,layout:{"icon-image":T(this,r,"f").blueDot,"icon-size":1.3,"icon-allow-overlap":!0,"icon-ignore-placement":!0,"symbol-sort-key":100,"icon-rotation-alignment":"map","icon-pitch-alignment":"map"},paint:{"icon-color":"#0000"}},A.A.getInstance().lastPolygonLayer)},v=function(t,e=null){const i={type:"FeatureCollection",features:null!=e?e:[]},o=this.map.getSource(t);if(o){if(!o.setData)throw new Error(`Source with ID "${t}" exists but is not a GeoJSON source.`);o.setData(i)}else this.map.addSource(t,{type:"geojson",data:i})},m=function(t,e,i,a,s){this.map.getLayer(t)&&this.map.removeLayer(t),this.map.addLayer({id:t,type:"line",source:e,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":["case",["==",["get","covered"],!0],a,i],"line-blur":.5,"line-width":s}},A.A.getInstance().lastPolygonLayer),T(this,o,"m",w).call(this,t)},w=function(t){this.map.on("click",t,(t=>{var e;console.log("click line",null===(e=t.features)||void 0===e?void 0:e[0])}))},y=function(t,e){this.map.getLayer(t)&&this.map.removeLayer(t),this.map.addLayer({id:t,type:"symbol",source:e,layout:{"symbol-placement":"line","symbol-spacing":10,"icon-image":T(this,r,"f").arrow,"icon-allow-overlap":!0,"icon-rotate":0,"icon-size":.4},paint:{"icon-opacity":1}},A.A.getInstance().lastPolygonLayer)};var L,F,P,N,R,z,q,W,D,H,O,B,V,_,G,j,U,$,Y,Z,X,J=i(7377),K=function(t,e,i,o){return new(i||(i=Promise))((function(a,s){function r(t){try{l(o.next(t))}catch(t){s(t)}}function n(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,n)}l((o=o.apply(t,e||[])).next())}))},Q=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)},tt=function(t,e,i,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(t,i):a?a.value=i:e.set(t,i),i};!function(t){t.NONE="NONE",t.NORMAL="NORMAL",t.PREVIEW="PREVIEW",t.ANIMATING="ANIMATING"}(X||(X={}));F=new WeakMap,P=new WeakMap,N=new WeakMap,R=new WeakMap,z=new WeakMap,q=new WeakMap,W=new WeakMap,L=new WeakSet,D=function(t){const e=A.A.getInstance().mapView;e.currentFloor.equals(t)?Q(this,L,"m",_).call(this,t):e.selectFloor(t)},H=function(){const t=[];let e=1;return Q(this,P,"f")&&0!==Q(this,P,"f").length?(Q(this,L,"m",O).call(this,t),Q(this,P,"f").forEach((i=>{var o;Q(this,P,"f")&&1===(null===(o=Q(this,P,"f"))||void 0===o?void 0:o.length)?Q(this,L,"m",B).call(this,t,i,"destination"):(Q(this,L,"m",B).call(this,t,i,e),e++,Q(this,L,"m",V).call(this,t,i))})),t):t},O=function(t){var e;if(Q(this,P,"f")&&(null===(e=Q(this,P,"f"))||void 0===e?void 0:e.length)){const e=Q(this,P,"f")[0];if(e.steps.length>0){const i=e.steps[0],o=i.getNode().coordinate.toArray();t.push({type:"Feature",geometry:{type:"Point",coordinates:o},properties:{segmentId:e.orderIndex,stepId:i.orderIndex,floorId:i.floor.id,label:"Start",start:!0,amenity:"none"}})}}},B=function(t,e,i){const o=e.steps;if(o.length>0){const a=o[o.length-1],s=a.getNode().coordinate.toArray();t.push({type:"Feature",geometry:{type:"Point",coordinates:s},properties:{segmentId:e.orderIndex,stepId:a.orderIndex,floorId:a.floor.id,label:`${i}`,start:!1,amenity:"none"}})}},V=function(t,e){const i=["ESCALATOR","ELEVATOR","STAIRS","PASSAGE","DOOR","RAMP"];e.steps.forEach((o=>{const a=o.getNode(),s=A.A.getInstance().getNodeLocation(a.id);if((null==s?void 0:s.amenity)&&i.includes(s.amenity)){const i=a.coordinate.toArray();t.push({type:"Feature",geometry:{type:"Point",coordinates:i},properties:{segmentId:e.orderIndex,stepId:o.orderIndex,floorId:o.floor.id,label:s.amenity,start:!1,amenity:s.amenity}})}}))},_=function(t){var e,i;if(Q(this,P,"f")&&(null===(e=Q(this,P,"f"))||void 0===e?void 0:e.length)>0){const e=[],o=[];Q(this,z,"f")&&e.push(...Q(this,z,"f").getFeatures(t)),null===(i=Q(this,P,"f"))||void 0===i||i.forEach((e=>{Q(this,z,"f")!==e&&o.push(...e.getFeatures(t))})),Q(this,N,"f")!==X.NORMAL&&Q(this,R,"f")?Q(this,L,"m",j).call(this,Q(this,R,"f")):Q(this,F,"f").drawActivePath(e,o),e.length>0?Q(this,L,"m",G).call(this,e):Q(this,L,"m",G).call(this,o),Q(this,F,"f").showRouteForFloor(t.id)}},G=function(t){if(0===t.length)return void console.warn("No features provided to adjust view.");const e=t[0].geometry.coordinates,i=t[t.length-1].geometry.coordinates,o=e[0],a=i[i.length-1];if(!o||!a)return void console.warn("Insufficient coordinates to adjust view.");const s=[[Math.min(o[0],a[0]),Math.min(o[1],a[1])],[Math.max(o[0],a[0]),Math.max(o[1],a[1])]],r=J.bearing(J.point(o),J.point(a));A.A.getInstance().map.fitBounds(s,{padding:{top:130,bottom:130,left:50,right:50},speed:1,duration:1e3,bearing:r,pitch:30})},j=function(t){var e;const i=[],o=[];null===(e=Q(this,P,"f"))||void 0===e||e.forEach((e=>{e.getFeatures().forEach((e=>{var i;const o=null===(i=e.properties)||void 0===i?void 0:i.stepId;void 0!==o&&(e.properties=Object.assign(Object.assign({},e.properties),{covered:o<=t.orderIndex}))})),e.containsStep(t)?i.push(...e.getFeatures()):o.push(...e.getFeatures())})),Q(this,F,"f").updateInactivePath(o),Q(this,F,"f").updateActivePath(i)},U=function t(e,i){if(i>=e.steps.length)return void this.stopWalking();const o=A.A.getInstance().map,a=e.steps[i],s=i<e.steps.length-1?e.steps[i+1]:null;Q(this,L,"m",$).call(this,a,s),Q(this,L,"m",j).call(this,a);const r=()=>{const s=A.A.getInstance().mapView.eventsHandler;s.emit("stepLoad",{step:a}),i==e.steps.length-1&&s.emit("walkthroughEnd",void 0),o.off("moveend",r),Q(this,N,"f")===X.ANIMATING&&tt(this,q,setTimeout((()=>{Q(this,L,"m",t).call(this,e,i+1)}),1e3),"f")};o.on("moveend",r)},$=function(t,e){const i=A.A.getInstance().map,o=t.floor,a=null==e?void 0:e.floor;A.A.getInstance().mapView.selectFloor(o);const s=t.getNode().coordinate.toArray(),r=(null==e?void 0:e.distance)||0,{speed:n,duration:l}=Q(this,L,"m",Z).call(this,r);if(o!==a)i.flyTo({center:s,speed:n,essential:!0,duration:l,pitch:30,bearing:t.getBearing()});else if(e){const o=e.getNode().coordinate.toArray();i.fitBounds([s,o],{padding:{top:100,bottom:150,left:50,right:50},speed:n,duration:l,bearing:t.getBearing(),pitch:40})}},Y=function(t){for(const e of Q(this,P,"f")||[]){const i=e.getNextStep(t);if(i)return i}return null},Z=function(t){const e=Math.sqrt(t/100);let i=1e3/e;i=Math.max(1e3,Math.min(i,5e3));return{speed:Math.max(.5,Math.min(e,2.5)),duration:i}};const et=class{constructor(){L.add(this),F.set(this,new k),P.set(this,null),N.set(this,X.NONE),R.set(this,null),z.set(this,null),q.set(this,void 0),W.set(this,void 0)}prepareLayers(t){return K(this,void 0,void 0,(function*(){yield Q(this,F,"f").initializeLayers(t)}))}showFloorRoute(t){Q(this,L,"m",_).call(this,t)}showRoute(t){var e,i;tt(this,N,X.NORMAL,"f"),this.clearAllRoutes(),tt(this,P,Array.isArray(t)?t:[t],"f"),tt(this,z,Q(this,P,"f")[0],"f");const o=null===(i=null===(e=Q(this,z,"f"))||void 0===e?void 0:e.steps[0])||void 0===i?void 0:i.floor;if(o){Q(this,L,"m",D).call(this,o);const t=Q(this,L,"m",H).call(this);Q(this,F,"f").createWaypointMarkers(t,null==o?void 0:o.id,Q(this,P,"f"))}}showStep(t){this.stopWalking(),Q(this,P,"f")&&0!==Q(this,P,"f").length?(tt(this,R,t,"f"),tt(this,N,X.PREVIEW,"f"),Q(this,L,"m",j).call(this,Q(this,R,"f")),Q(this,L,"m",$).call(this,Q(this,R,"f"),Q(this,L,"m",Y).call(this,Q(this,R,"f"))),A.A.getInstance().mapView.eventsHandler.emit("stepLoad",{step:t})):(0,I.vV)("Call showRoute with segments before calling showStep.")}walkThrough(t){this.stopWalking(),Q(this,P,"f")&&0!==Q(this,P,"f").length?(tt(this,N,X.ANIMATING,"f"),Q(this,L,"m",U).call(this,t,0)):(0,I.vV)("Call showRoute with segments before calling walkThrough.")}stopWalking(){tt(this,N,X.PREVIEW,"f"),Q(this,W,"f")&&(A.A.getInstance().map.off("moveend",Q(this,W,"f")),tt(this,W,null,"f")),Q(this,q,"f")&&(clearTimeout(Q(this,q,"f")),tt(this,q,null,"f"))}clearAllRoutes(){tt(this,P,null,"f"),tt(this,R,null,"f"),tt(this,z,null,"f"),this.stopWalking(),Q(this,F,"f").clearRoutePath()}};var it,ot,at,st,rt,nt,lt,ht,ct,dt,ft,ut,pt,gt=i(9548),vt=i(1651),mt=function(t,e,i,o){return new(i||(i=Promise))((function(a,s){function r(t){try{l(o.next(t))}catch(t){s(t)}}function n(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,n)}l((o=o.apply(t,e||[])).next())}))},wt=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)},yt=function(t,e,i,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(t,i):a?a.value=i:e.set(t,i),i};class Et{constructor(){it.add(this),ot.set(this,{fill:"fill-layer",border:"line-layer",extruded:[],extrudedBorder:[]}),at.set(this,{fill:"fill-features",extrude:"extrude-features"}),st.set(this,new Set),rt.set(this,0)}addPolygons(){const t=A.A.getInstance().getAllPolygons().reduce(((t,e)=>{var i;if(e.type===gt.H.WALL)t.walls.push(e);else if(0===(null===(i=null==e?void 0:e.feature)||void 0===i?void 0:i.properties.height))"WALL"===e.feature.properties.type?t.wallFillers.push(e):t.fillLayers.push(e);else{const i=J.buffer(e.feature,-3e-5,{units:"miles"});i&&i.geometry&&e.feature.updateGeometry(i.geometry);const o=A.A.getInstance().getPolygonLocation(e.id);(null==o?void 0:o.getDisplayModel())===vt.kP.POLYGON_LABEL&&e.setLocationNameAndLogo(o.name,o.logo),t.extrusionLayers.push(e)}return t}),{walls:[],wallFillers:[],fillLayers:[],extrusionLayers:[]});let e=[];[...t.wallFillers,...t.fillLayers].forEach((t=>{e.push(t.feature)}));const i={type:"FeatureCollection",features:e};wt(this,it,"a",nt).addSource(wt(this,at,"f").fill,{type:"geojson",data:i,generateId:!0}),wt(this,it,"a",nt).addLayer({id:wt(this,ot,"f").fill,type:"fill",source:wt(this,at,"f").fill,paint:{"fill-color":["case",["==",["get","selected"],!0],["get","hoverColor"],["coalesce",["get","fillColor"],["get","color"]]],"fill-opacity":["get","opacity"]},filter:["==",["get","floorId"],""]}),wt(this,it,"a",nt).addLayer({id:wt(this,ot,"f").border,type:"line",source:wt(this,at,"f").fill,paint:{"line-color":["get","borderColor"],"line-width":1.5,"line-opacity":1,"line-blur":.5},filter:["==",["get","floorId"],""]}),wt(this,it,"m",ct).call(this,wt(this,ot,"f").fill),wt(this,it,"m",ht).call(this,wt(this,ot,"f").fill);let o=[...t.walls,...t.extrusionLayers];wt(this,it,"m",lt).call(this,o)}showPolygonsForFloor(t){wt(this,ot,"f").extruded.forEach((e=>{wt(this,it,"a",nt).setFilter(e,["all",["==",["get","floorId"],t],["==",["get","opacity"],wt(this,it,"m",dt).call(this,e)]])})),wt(this,ot,"f").extrudedBorder.forEach((e=>{wt(this,it,"a",nt).setFilter(e,["all",["==",["get","floorId"],t],["==",["get","opacity"],wt(this,it,"m",dt).call(this,e)]])})),wt(this,it,"a",nt).setFilter(wt(this,ot,"f").fill,["==",["get","floorId"],t]),wt(this,it,"a",nt).setFilter(wt(this,ot,"f").border,["==",["get","floorId"],t])}updateSelections(t){const e=t.map((t=>t.getPolygon())).filter((t=>null!==t)),i=new Set([...wt(this,st,"f")].map((t=>A.A.getInstance().getPolygon(t))).filter((t=>null!==t))),o=new Set(e);i.forEach((t=>{o.has(t)||wt(this,it,"m",ut).call(this,t)})),e.forEach((t=>{t&&!i.has(t)&&wt(this,it,"m",ft).call(this,t)})),wt(this,it,"m",pt).call(this,wt(this,at,"f").extrude),wt(this,it,"m",pt).call(this,wt(this,at,"f").fill)}}ot=new WeakMap,at=new WeakMap,st=new WeakMap,rt=new WeakMap,it=new WeakSet,nt=function(){return A.A.getInstance().map},lt=function(t){const e=new Map;t.forEach((t=>{var i;const o=null!==(i=t.feature.properties.opacity)&&void 0!==i?i:1;e.has(o)||e.set(o,[]),e.get(o).push(t.feature)}));const i={type:"FeatureCollection",features:Array.from(e.values()).flat()};wt(this,it,"a",nt).getSource(wt(this,at,"f").extrude)?wt(this,it,"a",nt).getSource(wt(this,at,"f").extrude).setData(i):wt(this,it,"a",nt).addSource(wt(this,at,"f").extrude,{type:"geojson",data:i,generateId:!0});let o=!1;e.forEach(((t,e)=>{const i=`extrution-layer-${e}`;wt(this,ot,"f").extruded.push(i),wt(this,it,"a",nt).getLayer(i)||(wt(this,it,"a",nt).addLayer({id:i,type:"fill-extrusion",source:wt(this,at,"f").extrude,paint:{"fill-extrusion-color":["case",["==",["get","selected"],!0],["get","hoverColor"],["get","color"]],"fill-extrusion-height":["get","height"],"fill-extrusion-base":0,"fill-extrusion-opacity":e,"fill-extrusion-vertical-gradient":!1},filter:["all",["==",["get","floorId"],""],["==",["get","opacity"],e]]}),o||(A.A.getInstance().lastPolygonLayer=i,o=!0)),wt(this,it,"m",ct).call(this,i),wt(this,it,"m",ht).call(this,i)}))},ht=function(t){wt(this,it,"a",nt).on("mouseenter",t,(t=>{var e,i,o;yt(this,rt,(o=wt(this,rt,"f"),++o),"f");const a=null===(e=t.features)||void 0===e?void 0:e[0].properties.id,s=null===(i=A.A.getInstance().getPolygon(a))||void 0===i?void 0:i.selectable;a&&!0===s&&(wt(this,it,"a",nt).getCanvas().style.cursor="pointer")})),wt(this,it,"a",nt).on("mouseleave",t,(()=>{var t;yt(this,rt,(t=wt(this,rt,"f"),--t),"f"),wt(this,rt,"f")<1&&(wt(this,it,"a",nt).getCanvas().style.cursor="")}))},ct=function(t){wt(this,it,"a",nt).on("click",t,(t=>{var e;const i=null===(e=t.features)||void 0===e?void 0:e[0].properties.id,o=A.A.getInstance(),a=o.getPolygon(i),s=(null==a?void 0:a.selectable)||!1;a&&i&&!0===s&&o.mapView.selectLocation(o.getPolygonLocation(a.id))}))},dt=function(t){const e=t.match(/(\d*\.?\d+)$/);return e?parseFloat(e[1]):1},ft=function(t){t.selectable&&wt(this,st,"f").add(t.id)},ut=function(t){wt(this,st,"f").has(t.id)&&wt(this,st,"f").delete(t.id)},pt=function(t){return mt(this,void 0,void 0,(function*(){const e=wt(this,it,"a",nt).getSource(t);if(e)try{const t=yield e.getData();t.features=t.features.map((t=>(t.properties&&(t.properties.selected=wt(this,st,"f").has(t.properties.id)),t))),e.setData(t)}catch(t){console.error("Error updating source data:",t)}else console.error(`Source ${t} not found.`)}))};var xt,Ct,At,It,bt=i(1656),Mt=function(t,e,i,o){return new(i||(i=Promise))((function(a,s){function r(t){try{l(o.next(t))}catch(t){s(t)}}function n(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,n)}l((o=o.apply(t,e||[])).next())}))},Tt=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)};class St{constructor(){xt.add(this),Ct.set(this,{markers:"marker-source"}),At.set(this,{markers:"marker-layer"})}addMarkers(t){const e={type:"FeatureCollection",features:t};Tt(this,xt,"a",It).addSource(Tt(this,Ct,"f").markers,{type:"geojson",data:e,generateId:!0}),Tt(this,xt,"a",It).addLayer({id:Tt(this,At,"f").markers,type:"symbol",source:Tt(this,Ct,"f").markers,layout:{"icon-image":["get","icon"],"icon-size":["case",["==",["get","selected"],!0],1.2,.6],"icon-anchor":["case",["==",["get","selected"],!0],"bottom","center"],"text-field":["get","title"],"text-font":["case",["==",["get","selected"],!0],["literal",["Noto Sans Bold"]],["literal",["Noto Sans Regular"]]],"text-size":["case",["==",["get","selected"],!0],15,10],"text-anchor":["case",["==",["get","selected"],!0],"top","left"],"text-offset":["case",["==",["get","selected"],!0],["literal",[0,.5]],["literal",[1.5,0]]],"text-optional":!0,"icon-allow-overlap":!1,"text-allow-overlap":!1,"symbol-sort-key":["case",["==",["get","selected"],!0],1,["get","priority"]]},paint:{"text-color":["get","color"],"text-halo-color":"#FFF","text-halo-width":2,"icon-opacity":1},filter:["==",["get","floorId"],""]}),Tt(this,xt,"a",It).on("click",Tt(this,At,"f").markers,(t=>{var e;const i=(null===(e=t.features)||void 0===e?void 0:e[0].properties.id)||"",o=A.A.getInstance(),a=o.getLocation(i);a&&o.mapView.selectLocation(a)}))}showRouteForFloor(t){Tt(this,xt,"a",It).setFilter(Tt(this,At,"f").markers,["==",["get","floorId"],t])}updateSelectedMarkerState(t){return Mt(this,void 0,void 0,(function*(){const e=Tt(this,xt,"a",It).getSource(Tt(this,Ct,"f").markers);if(e)try{const i=yield e.getData();i.features=i.features.map((e=>(e.properties&&(e.properties.selected=t.has(e.properties.id)),e))),e.setData(i)}catch(t){console.error("Error updating marker source data:",t)}else console.error(`Source ${Tt(this,Ct,"f").markers} not found.`)}))}}Ct=new WeakMap,At=new WeakMap,xt=new WeakSet,It=function(){return A.A.getInstance().map};class kt{constructor(t,e){var i,o,a;this.type="Feature";const s=null==t?void 0:t.getPolygon(),r=null!==(o=null===(i=null==s?void 0:s.center)||void 0===i?void 0:i.toArray())&&void 0!==o?o:t.getNode().coordinate.toArray();this.geometry={type:"Point",coordinates:r};const n=t.type===vt.l.AMENITIES&&0===t.categories.length?t.amenity:"DEFAULT";this.properties={selected:!1,id:t.id,icon:(null===(a=t.categories[0])||void 0===a?void 0:a.iconName)||n,color:t.defaultColour||"#41648B",title:t.name,floorId:e.id,priority:t.type===vt.l.AMENITIES?10:5}}}var Lt,Ft,Pt,Nt,Rt,zt,qt,Wt=function(t,e,i,o){return new(i||(i=Promise))((function(a,s){function r(t){try{l(o.next(t))}catch(t){s(t)}}function n(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,n)}l((o=o.apply(t,e||[])).next())}))},Dt=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)},Ht=function(t,e,i,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(t,i):a?a.value=i:e.set(t,i),i};class Ot{constructor(){Lt.add(this),Ft.set(this,new St),Pt.set(this,new Map),Nt.set(this,null),Rt.set(this,new Set)}addMarkers(t){return Wt(this,void 0,void 0,(function*(){const e=A.A.getInstance(),i=e.getAllCategories();for(const e of i)yield t.addImageToQueue(e.iconName,e.icon||"https://backend-lightning-prod.s3.ap-southeast-1.amazonaws.com/categories/v2/default.svg",e.color.hex);const o=e.getAllAmenities();for(const i of o)yield t.addImageToQueue(i,e.getImageUrlFor(i)||"https://backend-lightning-prod.s3.ap-southeast-1.amazonaws.com/categories/v2/default.svg","#41648B");yield t.processImageQueue(),e.getAllLoacations().forEach((t=>{if(t.getDisplayModel()===vt.kP.MARKER_WITH_LABEL){const e=new kt(t,t.floor);Dt(this,Pt,"f").set(t.id,e)}})),Dt(this,Ft,"f").addMarkers(Array.from(Dt(this,Pt,"f").values()))}))}setFloor(t){Ht(this,Nt,t,"f"),Dt(this,Ft,"f").showRouteForFloor(Dt(this,Nt,"f").id)}updateSelections(t){const e=t.filter((t=>t.getDisplayModel()===vt.kP.MARKER_WITH_LABEL)).map((t=>Dt(this,Pt,"f").get(t.id))),i=new Set([...Dt(this,Rt,"f")].map((t=>Dt(this,Pt,"f").get(t))).filter((t=>null!==t))),o=new Set(e);i.forEach((t=>{o.has(t)||Dt(this,Lt,"m",qt).call(this,t)})),e.forEach((t=>{t&&!i.has(t)&&Dt(this,Lt,"m",zt).call(this,t)})),Dt(this,Ft,"f").updateSelectedMarkerState(Dt(this,Rt,"f"))}}Ft=new WeakMap,Pt=new WeakMap,Nt=new WeakMap,Rt=new WeakMap,Lt=new WeakSet,zt=function(t){Dt(this,Rt,"f").add(t.properties.id)},qt=function(t){Dt(this,Rt,"f").has(t.properties.id)&&Dt(this,Rt,"f").delete(t.properties.id)};var Bt=i(6959),Vt=i(1507),_t=i(7301),Gt=i(4922),jt=i(9437);class Ut{static addDynamic3DModels(t){this.currentFloorId=A.A.getInstance().mapView.currentFloor.id,this.map=t;const e=Array.from(A.A.getInstance().getModelMetadataFromCache());(null==e?void 0:e.length)&&this.loadModels(e)}static loadModels(t){const e=A.A.getInstance();t.forEach(((t,i)=>{const{modelPath:o,sizeMultiplier:a,rotate:s,floorId:r,coordinate:n}=t,l=e.getModelFromCache(o);if(!l)return void console.warn(`Model not found in cache for path: ${o}`);const h=[Math.PI/2,Math.PI/s,0],c=x().MercatorCoordinate.fromLngLat(n,.2);console.log(c,"mer");const d={translateX:c.x,translateY:c.y,translateZ:c.z,rotateX:h[0],rotateY:h[1],rotateZ:h[2],scale:c.meterInMercatorCoordinateUnits()},f={id:`3d-model-${r}-${i}`,type:"custom",renderingMode:"3d",onAdd:(t,e)=>{const i=new Gt.i7d,o=new Gt.Z58;this.sharedRenderer||(this.sharedRenderer=new jt.JeP({canvas:t.getCanvas(),context:e,antialias:!0}),this.sharedRenderer.autoClear=!1);const a=new Gt.ZyN(16777215,3);a.position.set(0,40,50).normalize(),o.add(a);const s=new Gt.dth(16777215,9276813,3);o.add(s);const n=l.clone();n.visible=r===this.currentFloorId,n.frustumCulled=!1,this.modelsByFloor.has(r)||this.modelsByFloor.set(r,[]),this.modelsByFloor.get(r).push(n),o.add(n),f._camera=i,f._scene=o},render:(t,e)=>{var i;const o=f._camera,s=f._scene,r=this.sharedRenderer;if(!o||!s||!r)return;const n=(new Gt.kn4).makeRotationAxis(new Gt.Pq0(1,0,0),d.rotateX),l=(new Gt.kn4).makeRotationAxis(new Gt.Pq0(0,1,0),d.rotateY),h=(new Gt.kn4).makeRotationAxis(new Gt.Pq0(0,0,1),d.rotateZ),c=(null===(i=null==e?void 0:e.defaultProjectionData)||void 0===i?void 0:i.mainMatrix)?(new Gt.kn4).fromArray(e.defaultProjectionData.mainMatrix):(new Gt.kn4).fromArray(e),u=(new Gt.kn4).makeTranslation(d.translateX,d.translateY,d.translateZ).scale(new Gt.Pq0(d.scale*a,-d.scale*a,d.scale*a)).multiply(n).multiply(l).multiply(h);o.projectionMatrix=c.multiply(u),r.resetState(),r.render(s,o)}};this.map.addLayer(f,A.A.getInstance().lastPolygonLayer||"fill-layer")}))}static filterModelsByFloor(t){this.modelsByFloor.forEach(((e,i)=>{const o=i===t;e.forEach((t=>{t.visible=o}))})),this.currentFloorId=t}}Ut.modelsByFloor=new Map,Ut.currentFloorId=null,Ut.sharedRenderer=null;var $t,Yt,Zt,Xt,Jt,Kt,Qt,te,ee,ie,oe,ae,se,re,ne=i(892),le=i(6524),he=i(5682),ce=i(286),de=i(1357),fe=i(5596),ue=i.n(fe),pe=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)},ge=function(t,e,i,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(t,i):a?a.value=i:e.set(t,i),i};class ve{constructor(){$t.add(this),Yt.set(this,{label3D:"label-3d-layer"}),Zt.set(this,{}),Xt.set(this,new Set),Jt.set(this,null),Kt.set(this,null),Qt.set(this,0),te.set(this,1)}addCustom3DLabels(t){const e=A.A.getInstance().getAllPolygons().filter((e=>{var i,o,a,s,r,n,l,h,c,d,f;return e.hasEnoughAreaForLabel()&&null!==(null===(o=null===(i=e.feature)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.locationName)&&(null===(s=null===(a=e.feature)||void 0===a?void 0:a.properties)||void 0===s?void 0:s.floorId)===t||"vertical"===(null===(l=null===(n=null===(r=e.feature)||void 0===r?void 0:r.properties)||void 0===n?void 0:n.label)||void 0===l?void 0:l.position)&&null!==(null===(c=null===(h=e.feature)||void 0===h?void 0:h.properties)||void 0===c?void 0:c.locationName)&&(null===(f=null===(d=e.feature)||void 0===d?void 0:d.properties)||void 0===f?void 0:f.floorId)===t})).map((t=>t.feature));pe(this,$t,"m",ie).call(this),pe(this,$t,"m",oe).call(this,t,e),ge(this,Qt,pe(this,$t,"a",ee).getBearing(),"f"),pe(this,$t,"a",ee).on("rotate",pe(this,$t,"m",re).bind(this))}showLabelsForFloor(t){var e;ge(this,Kt,t,"f"),Object.values(pe(this,Zt,"f")).forEach((t=>t.forEach((t=>t.visible=!1)))),null===(e=pe(this,Zt,"f")[t])||void 0===e||e.forEach((t=>{t.visible=!0,t.userData&&"number"==typeof t.userData.baseRotation&&(t.rotation.z=t.userData.baseRotation+(-1===pe(this,te,"f")?Math.PI:0))}))}onFloorChange(t){const e=A.A.getInstance().getAllPolygons();if(pe(this,Xt,"f").has(t))this.showLabelsForFloor(t);else{const i=e.filter((e=>{var i,o,a,s;return e.hasEnoughAreaForLabel()&&null!==(null===(o=null===(i=e.feature)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.locationName)&&(null===(s=null===(a=e.feature)||void 0===a?void 0:a.properties)||void 0===s?void 0:s.floorId)===t})).map((t=>t.feature));pe(this,$t,"m",oe).call(this,t,i)}}}Yt=new WeakMap,Zt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,Kt=new WeakMap,Qt=new WeakMap,te=new WeakMap,$t=new WeakSet,ee=function(){return A.A.getInstance().map},ie=function(){var t;const e=pe(this,$t,"a",ee).getCanvas().getContext("webgl");ge(this,Jt,new le.A(pe(this,$t,"a",ee),e),"f");const i={id:pe(this,Yt,"f").label3D,type:"custom",renderingMode:"3d",onAdd:()=>{},render:()=>{var t;null===(t=pe(this,Jt,"f"))||void 0===t||t.update()}};pe(this,$t,"a",ee).getLayer(null===(t=pe(this,Yt,"f"))||void 0===t?void 0:t.label3D)||pe(this,$t,"a",ee).addLayer(i)},oe=function(t,e){pe(this,Xt,"f").has(t)||(pe(this,Zt,"f")[t]=[],e.forEach((e=>{var i;const o=e.geometry.coordinates,a=J.polygon(o),s=J.center(a).geometry.coordinates,r=(0,he.x)(s);(null===(i=null==e?void 0:e.properties)||void 0===i?void 0:i.locationLogo)?pe(this,$t,"m",se).call(this,e,r,o,a,t):pe(this,$t,"m",ae).call(this,e,r,t)})),pe(this,Xt,"f").add(t)),this.showLabelsForFloor(t)},ae=function(t,e,i){var o,a,s,r,n,l,h,c,d;const f=null!==(s=null===(a=null===(o=null==t?void 0:t.properties)||void 0===o?void 0:o.label)||void 0===a?void 0:a.nextRotation)&&void 0!==s?s:0,u=J.centerOfMass(t.geometry).geometry.coordinates,p=(null===(n=null===(r=null==t?void 0:t.properties)||void 0===r?void 0:r.label)||void 0===n?void 0:n.position)||"horizontal",g=(0,he.x)(u);console.log(g,"position");let v=f+Math.PI;const m=(null===(h=null===(l=t.properties)||void 0===l?void 0:l.label)||void 0===h?void 0:h.align)||"center",w={"top-left":{anchorX:"left",anchorY:"top"},"top-center":{anchorX:"center",anchorY:"top"},"top-right":{anchorX:"right",anchorY:"top"},"middle-left":{anchorX:"left",anchorY:"middle"},center:{anchorX:"center",anchorY:"middle"},"middle-right":{anchorX:"right",anchorY:"middle"},"bottom-left":{anchorX:"left",anchorY:"bottom"},"bottom-center":{anchorX:"center",anchorY:"baseline"},"bottom-right":{anchorX:"right",anchorY:"bottom"}},{anchorX:y,anchorY:E}="top-left"===m?w.center:w[m],x=new ce.EY;x.text="vertical"===p?t.properties.locationName:ue()(t.properties.locationName,{width:10}),x.fontSize=t.properties.label.fontSize,x.fontWeight=900,x.textAlign="center",x.color=(0,de.e$)(.6,(null===(c=t.properties)||void 0===c?void 0:c.color)||"rgba(0,0,0,0.5)"),x.lineHeight=1,x.letterSpacing=-.02,x.anchorX=y,x.anchorY=E,x.rotation.set(0,0,v),x.userData={floorId:i,baseRotation:v},x.sync((()=>{x.scale.set(.0025,.0025,1),x.position.set(g.x,g.y,1.2===t.properties.height?.038:1.5===t.properties.height?.042:.8===t.properties.height?.03:4===t.properties.height?.12:0)})),null===(d=pe(this,Jt,"f"))||void 0===d||d.add(x),pe(this,Zt,"f")[i].push(x)},se=function(t,e,i,o,a){(new Gt.Tap).load(t.properties.locationLogo,(e=>{var i,s,r,n;if(!e.image)return;const l=e.image.width/e.image.height,h=new Gt.bdM(1,1),c=new Gt.V9B({map:e,transparent:!0,opacity:1,side:Gt.$EB}),d=new Gt.eaF(h,c),f=new Gt.YJl;f.add(d);const u=J.centerOfMass(o).geometry.coordinates,p=(0,he.x)(u),g=null!==(r=null===(s=null===(i=null==t?void 0:t.properties)||void 0===i?void 0:i.label)||void 0===s?void 0:s.nextRotation)&&void 0!==r?r:0;f.rotation.set(0,0,g);const[v,m,w,y]=J.bbox(o),E=(0,he.x)([v,m]),x=(0,he.x)([w,y]),C=(new Gt.Pq0).subVectors(x,E).multiplyScalar(.85);let A,I;C.x/C.y>l?(I=C.y,A=I*l):(A=C.x,I=A/l),d.scale.set(A/2,I/2,.5),f.position.set(p.x,p.y,1.2===t.properties.height?.038:1.5===t.properties.height?.042:.8===t.properties.height?.03:4===t.properties.height?.12:0),f.userData={floorId:a,baseRotation:g},null===(n=pe(this,Jt,"f"))||void 0===n||n.add(f),pe(this,Zt,"f")[a].push(f)}))},re=function(){const t=pe(this,$t,"a",ee).getBearing(),e=t>95||t<-95?-1:1;pe(this,te,"f")!==e&&(ge(this,te,e,"f"),pe(this,Kt,"f")&&pe(this,Zt,"f")[pe(this,Kt,"f")]&&pe(this,Zt,"f")[pe(this,Kt,"f")].forEach((t=>{t.userData&&"number"==typeof t.userData.baseRotation&&(t.rotation.z=t.userData.baseRotation+(-1===pe(this,te,"f")?Math.PI:0))}))),ge(this,Qt,t,"f")};var me,we,ye,Ee,xe,Ce,Ae,Ie,be,Me,Te,Se,ke,Le,Fe,Pe,Ne,Re,ze,qe=function(t,e,i,o){return new(i||(i=Promise))((function(a,s){function r(t){try{l(o.next(t))}catch(t){s(t)}}function n(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,n)}l((o=o.apply(t,e||[])).next())}))},We=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)},De=function(t,e,i,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(t,i):a?a.value=i:e.set(t,i),i};class He{get currentFloor(){return We(this,be,"f")}constructor(t,e,i,o){me.add(this),this.eventsHandler=new Bt.U,ye.set(this,void 0),Ee.set(this,void 0),xe.set(this,void 0),Ce.set(this,void 0),Ae.set(this,void 0),Ie.set(this,void 0),be.set(this,void 0),Me.set(this,!1),Te.set(this,[]),Se.set(this,void 0),ke.set(this,void 0),Le.set(this,void 0),this.mapSite=e,De(this,be,this.mapSite.getDefaultMap(),"f"),De(this,Se,Object.assign(Object.assign({},We(we,we,"f",Fe)),i),"f"),We(this,Se,"f").center=null==i?void 0:i.center,De(this,ye,t,"f"),De(this,Ee,new et,"f"),De(this,xe,new Et,"f"),De(this,Ae,new ve,"f"),De(this,Ce,new Ot,"f"),De(this,ke,new ne.u,"f"),De(this,Le,o,"f"),De(this,Ie,new(x().Map)({container:this.container,style:"https://beco-lightning-backend.s3.ap-southeast-1.amazonaws.com/styles/style.json",center:We(this,Se,"f").center?new C.r(We(this,Se,"f").center).toArray():this.mapSite.getCenter().toArray(),zoom:We(this,Se,"f").zoom,pitch:We(this,Se,"f").pitch,bearing:We(this,Se,"f").bearing,attributionControl:!1,antialias:!0,maxPitch:72,bearingSnap:0}),"f");const a=A.A.getInstance();a.mapView=this,a.map=We(this,Ie,"f"),We(this,Ie,"f").on("load",(()=>{We(this,me,"m",Pe).call(this)})),We(this,Ie,"f").on("move",(()=>{const t=We(this,Ie,"f").getCenter(),e=We(this,Ie,"f").getZoom(),i=We(this,Ie,"f").getBearing(),o=We(this,Ie,"f").getPitch();this.eventsHandler.emit("viewChange",{viewOptions:{center:[t.lat,t.lng],zoom:e,bearing:i,pitch:o}})}))}get container(){return We(this,ye,"f")}getTranslation(t,e,i){return We(this,Le,"f")?We(this,Le,"f").getTranslation(t,e,i):null}get routeController(){return We(this,Ee,"f")}focusTo(t,e=20,i=null,o=null){var a;const s=t,r=s.getPolygon(),n=r?r.center:null===(a=s.getNode())||void 0===a?void 0:a.coordinate;n&&We(this,Ie,"f").flyTo({center:n.toArray(),zoom:e,essential:!0,speed:.6,curve:1.2,bearing:null!=i?i:We(this,Ie,"f").getBearing(),pitch:null!=o?o:We(this,Ie,"f").getPitch()})}updateZoom(t){const e=We(this,Ie,"f").getMinZoom(),i=We(this,Ie,"f").getMaxZoom(),o=Number.isFinite(t)?Math.max(e,Math.min(i,t)):We(this,Ie,"f").getZoom();We(this,Ie,"f").easeTo({zoom:o,duration:1e3})}updatePitch(t){const e=Number.isFinite(t)?Math.max(0,Math.min(60,t)):We(this,Ie,"f").getPitch();We(this,Ie,"f").easeTo({pitch:e,duration:1e3})}updateBearing(t){const e=Number.isFinite(t)?(t%360+360)%360:We(this,Ie,"f").getBearing();We(this,Ie,"f").easeTo({bearing:e,duration:1e3})}selectFloor(t){var e;(null===(e=We(this,be,"f"))||void 0===e?void 0:e.equals(t))||We(this,me,"m",Re).call(this,t)}get floor(){return We(this,be,"f")}getCategories(){return A.A.getInstance().getAllCategories()}getLocations(){return A.A.getInstance().getAllLoacations().filter((t=>!t.ishidden()))}getAllAminityLocations(){return A.A.getInstance().getAllAmenitiesLocations().filter((t=>!t.ishidden()))}searchForLocations(t,e){const i=A.A.getInstance().getAllLoacations().filter((t=>!t.ishidden())),o=new bt.J(t);e(i.filter((t=>!!t.getNameStatement()&&o.matches(t.getNameStatement()))))}searchForCategories(t,e){const i=A.A.getInstance().getAllCategories(),o=new bt.J(t);e(i.filter((t=>!!t.getNameStatement()&&o.matches(t.getNameStatement()))))}selectLocation(t){var e;const i=t,o=(i.getNode(),null===(e=i.getNode())||void 0===e?void 0:e.getMap());if(o){this.selectFloor(o),We(this,Me,"f")?-1===We(this,Te,"f").indexOf(i)&&(We(this,Te,"f").push(i),this.eventsHandler.emit("select",{locations:We(this,Te,"f")})):(De(this,Te,[i],"f"),this.eventsHandler.emit("select",{locations:We(this,Te,"f")}));i.getPolygon()&&We(this,xe,"f").updateSelections(We(this,Te,"f")),We(this,Ce,"f").updateSelections(We(this,Te,"f")),this.focusTo(t)}}getHappenings(t){return A.A.getInstance().getHappenings(t)}getSessionId(){return qe(this,void 0,void 0,(function*(){try{const t=_t.A.getInstance();return yield t.getSession(this.mapSite.id)}catch(t){throw new Error(`Failed to retrieve session ID: ${t}`)}}))}getEventSuggestions(t,e){return qe(this,void 0,void 0,(function*(){try{const i=_t.A.getInstance();return yield i.getEventSuggestions(this.mapSite.id,t,e)}catch(t){throw new Error(`Failed to retrieve event suggestions: ${t}`)}}))}getQuestions(){return A.A.getInstance().getQuestions()}getAmenities(){return A.A.getInstance().getAllAmenities()}selectAmenities(t){this.enableMultiSelection(),De(this,Te,A.A.getInstance().getAmenities(t),"f"),We(this,Ce,"f").updateSelections(We(this,Te,"f")),(0,I.fH)("Selecting Amenities (",t,") :",We(this,Te,"f"))}enableMultiSelection(t=!0){if(De(this,Me,t,"f"),!t){const t=We(this,Te,"f")[We(this,Te,"f").length-1];De(this,Te,t?[t]:[],"f")}}clearSelection(){this.enableMultiSelection(!1),De(this,Te,[],"f"),We(this,xe,"f").updateSelections(We(this,Te,"f")),We(this,Ce,"f").updateSelections(We(this,Te,"f"))}setBounds(t,e){var i;const o=Vt.W.calculateBoundsAndCenterWithOffset(t,e);if(We(this,Ie,"f").setMaxBounds(o.bounds),!(null===(i=We(this,Se,"f"))||void 0===i?void 0:i.center)){const t=new C.r(o.center).toArray();We(this,Se,"f").center=t,We(this,Ie,"f").setCenter(o.center)}}resetDefaultViewport(t){De(this,Se,Object.assign(Object.assign({},We(this,Se,"f")),t),"f"),We(this,me,"m",ze).call(this,We(this,Se,"f"))}setViewport(t){We(this,me,"m",ze).call(this,t)}}we=He,ye=new WeakMap,Ee=new WeakMap,xe=new WeakMap,Ce=new WeakMap,Ae=new WeakMap,Ie=new WeakMap,be=new WeakMap,Me=new WeakMap,Te=new WeakMap,Se=new WeakMap,ke=new WeakMap,Le=new WeakMap,me=new WeakSet,Pe=function(){return qe(this,void 0,void 0,(function*(){var t,e;We(this,me,"m",Ne).call(this,null===(t=We(this,Se,"f"))||void 0===t?void 0:t.hideOutsideLayers,null===(e=We(this,Se,"f"))||void 0===e?void 0:e.background),We(this,xe,"f").addPolygons(),We(this,Ae,"f").addCustom3DLabels(We(this,be,"f").id),yield We(this,Ee,"f").prepareLayers(We(this,ke,"f")),yield We(this,Ce,"f").addMarkers(We(this,ke,"f")),We(this,me,"m",Re).call(this,We(this,be,"f")),Ut.addDynamic3DModels(We(this,Ie,"f")),this.eventsHandler.emit("load",void 0)}))},Ne=function(t=!1,e="#FFFFFF"){We(this,ye,"f").style.background=e;const i=We(this,Ie,"f").getStyle().layers.find((t=>"background"===t.type));if(i&&We(this,Ie,"f").setPaintProperty(i.id,"background-color",e),t){const t=We(this,Ie,"f").getStyle(),e=null==t?void 0:t.layers;if(!e)return;for(const t of e){if(!t||!t.id||!t.type)continue;const e=t.id;"background"!==t.type&&We(this,Ie,"f").getLayer(e)&&We(this,Ie,"f").setLayoutProperty(e,"visibility","none")}}},Re=function(t){De(this,be,t,"f"),We(this,xe,"f").showPolygonsForFloor(t.id),We(this,Ee,"f").showFloorRoute(t),We(this,Ce,"f").setFloor(t),We(this,Ae,"f").onFloorChange(t.id),Ut.filterModelsByFloor(t.id),this.eventsHandler.emit("switchToFloor",{floor:t}),(0,I.fH)("Selected Floor:",t)},ze=function(t){const e={duration:500,easing:t=>t};t.center&&(e.center=new C.r(t.center).toArray()),void 0!==t.zoom&&(e.zoom=t.zoom),void 0!==t.pitch&&(e.pitch=t.pitch),void 0!==t.bearing&&(e.bearing=t.bearing),We(this,Ie,"f").easeTo(e)},Fe={value:{zoom:18.5,pitch:50,bearing:0}};var Oe=i(1245),Be=function(t,e,i,o){return new(i||(i=Promise))((function(a,s){function r(t){try{l(o.next(t))}catch(t){s(t)}}function n(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,n)}l((o=o.apply(t,e||[])).next())}))};function Ve(t,e,i,o){return Be(this,void 0,void 0,(function*(){{const a=o?yield Oe.bW.initialize(o):void 0;return new He(t,e,i,a)}}))}},7053:(t,e,i)=>{i.d(e,{a:()=>L});var o,a,s,r,n,l,h,c,d=i(2837),f=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)},u=function(t,e,i,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(t,i):a?a.value=i:e.set(t,i),i};!function(t){t.NONE="None",t.DEPARTURE="Departure",t.ARRIVALDESTINATION="ArrivalDestination",t.ARRIVALWAYPOINT="ArrivalWaypoint",t.TURN="Turn",t.SWITCHFLOOR="SwitchFloor"}(l||(l={})),function(t){t.NONE="None",t.STRAIGHT="Straight",t.RIGHT="Right",t.SLIGHTRIGHT="SlightRight",t.UTURNRIGHT="UTurnRight",t.LEFT="Left",t.SLIGHTLEFT="SlightLeft",t.UTURNLEFT="UTurnLeft",t.UP="Up",t.DOWN="Down"}(h||(h={})),function(t){t.NONE="None",t.AT="At",t.BEFORE="Before",t.AFTER="After"}(c||(c={}));class p{constructor(t,e,i,a=0,l=0){s.set(this,void 0),r.set(this,void 0),this.reference=c.NONE,this.referenceLocation=null,this.orderIndex=f(o,o,"m",n).call(o),u(this,r,l,"f"),u(this,s,t,"f"),this.action=e,this.direction=i,this.distance=a,this.referenceLocation=d.A.getInstance().getNodeLocation(t.id),this.referenceLocation&&(this.reference=c.AT)}static resetCounter(){return u(o,o,-1,"f",a)}get floor(){return f(this,s,"f").getMap()}getNode(){return f(this,s,"f")}getBearing(){return f(this,r,"f")}equals(t){return this.orderIndex===t.orderIndex}}o=p,s=new WeakMap,r=new WeakMap,n=function(){var t,e;return u(t=o,o,(e=f(t,o,"f",a),++e),"f",a)},a={value:-1};class g{constructor(t,e,i,o){this.type="Feature",this.geometry={type:"LineString",coordinates:o},this.properties={stepId:t,segmentId:e,floorId:i,covered:!1}}}var v,m,w,y,E,x,C,A,I,b=i(7377),M=function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)},T=function(t,e,i,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(t,i):a?a.value=i:e.set(t,i),i};class S{get steps(){return M(this,y,"f")}constructor(t){v.add(this),y.set(this,[]),E.set(this,[]),this.distance=t.totalCost,this.orderIndex=M(m,m,"m",x).call(m),M(this,v,"m",C).call(this,t)}static resetCounter(){return T(m,m,-1,"f",w)}containsStep(t){return this.steps.some((e=>e.orderIndex===t.orderIndex))}getFeatures(t=null){if(t){return M(this,E,"f").filter((e=>e.properties&&e.properties.floorId===t.id))}return M(this,E,"f")}getFirstSwitchFloorStep(){return this.steps.length>0?null:this.steps.find((t=>t.action===l.SWITCHFLOOR))||null}createFeature(t,e){if(t.length<2)throw new Error("At least two nodes are required to construct a line feature.");const i=[];for(let e=0;e<t.length-1;e++){const o=t[e],a=t[e+1],s=b.point(o.coordinate.toArray()),r=b.point(a.coordinate.toArray()),n=b.lineString([s.geometry.coordinates,r.geometry.coordinates]),l=o.getCostToNode(a);if(l>.5){const o=Math.ceil(l/.5);for(let t=0;t<=o;t++){const e=b.along(n,.5*t,{units:"meters"});i.push(e.geometry.coordinates)}e<t.length-2&&i.pop()}else i.push(...n.geometry.coordinates)}const o=t[0].getMap().id;return new g(e.orderIndex,this.orderIndex,o,i)}getNextStep(t){const e=this.steps.indexOf(t);return-1!==e&&e<this.steps.length-1?this.steps[e+1]:null}equals(t){return this.orderIndex===t.orderIndex}}m=S,y=new WeakMap,E=new WeakMap,v=new WeakSet,x=function(){var t,e;return T(t=m,m,(e=M(t,m,"f",w),++e),"f",w)},C=function(t){const e=this;let i=0,o=0,a=[],s=[],r=[];const n=t.path,c=n.length;for(let t=0;t<c;t++){const d=n[t],f=n[t+1],u=n[t-1];r.push(d);const g=t===c-1,m=0===t,w=u&&!u.getMap().equals(d.getMap()),y=f&&!f.getMap().equals(d.getMap()),E=d.coordinate.toArray();if(g){w?(r=[],o=0):o+=d.getCostToNode(u);const t=new p(d,l.ARRIVALDESTINATION,h.NONE,o,i);s.push(this.createFeature(r,t)),a.push(t),o=0}else if(!m&&!w||y)if(y){o+=d.getCostToNode(u);const t=new p(d,l.SWITCHFLOOR,h.UP,o,i);s.push(this.createFeature(r,t)),a.push(t),r=[d],o=0}else{o+=d.getCostToNode(u);const t=f.coordinate.toArray(),n=b.bearing(E,t),c=M(e,v,"m",A).call(e,i,n);if(i=n,c!==h.STRAIGHT){const t=new p(d,l.TURN,c,o,i);s.push(this.createFeature(r,t)),a.push(t),r=[d],o=0}}else o=0,r=[d],f&&(i=b.bearing(E,f.coordinate.toArray()),a.push(new p(d,l.DEPARTURE,h.NONE,0,i)),o=0)}a.reduce(((t,e)=>t+e.distance),0);T(e,E,s,"f"),T(e,y,a,"f")},A=function(t,e){const i=(e-t+540)%360-180;return M(this,v,"m",I).call(this,i)},I=function(t){switch(!0){case t>=-10&&t<=10:return h.STRAIGHT;case t>10&&t<=45:return h.SLIGHTRIGHT;case t>45&&t<=135:return h.RIGHT;case t>135:return h.UTURNRIGHT;case t<-10&&t>=-45:return h.SLIGHTLEFT;case t<-45&&t>=-135:return h.LEFT;case t<-135:return h.UTURNLEFT;default:return h.STRAIGHT}},w={value:-1};var k=i(4951);function L(t,e,i=[],o){const a=t.getNode(),s=e.getNode();console.log("Starting to find route from :",a,", to :",s," with waypoints :",i);let r=[];if(a&&s){let t=a;S.resetCounter(),p.resetCounter();for(const e of i){const i=e.getNode();if(i){const e=t.findRout(i,(null==o?void 0:o.getAccessiblePath)||!1);if(!e)return(0,k.vV)("Path not found between",t,"and waypoint",i),null;{const t=new S({path:e.path,totalCost:e.totalCost,maxDistance:null==o?void 0:o.maxDistanceThreshold});r.push(t)}}t=i}const n=t.findRout(s,(null==o?void 0:o.getAccessiblePath)||!1);if(!n)return(0,k.vV)("Path not found between",t,"and waypoint",e),null;{const t=new S({path:n.path,totalCost:n.totalCost,maxDistance:null==o?void 0:o.maxDistanceThreshold});r.push(t)}}return r}},2500:(t,e,i)=>{i.d(e,{A:()=>d});var o=i(33),a=i(3943),s=i(1016),r=i(239),n=i(2623),l=i(4184),h=function(t,e,i,o){return new(i||(i=Promise))((function(a,s){function r(t){try{l(o.next(t))}catch(t){s(t)}}function n(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,n)}l((o=o.apply(t,e||[])).next())}))};class c extends o.A{constructor(){super()}static getInstance(){return c.instance||(c.instance=new c),c.instance}getRouteData(t){return h(this,void 0,void 0,(function*(){try{const e=yield this.get(t,void 0,"arraybuffer"),i=new Uint8Array(e);return a.$j.decode(i)}catch(t){throw t}}))}getShapeData(t){return h(this,void 0,void 0,(function*(){try{const e=yield this.get(t,void 0,"arraybuffer"),i=new Uint8Array(e);return n.IR.decode(i)}catch(t){throw t}}))}getCategoryData(t){return h(this,void 0,void 0,(function*(){try{const e=yield this.get(t,void 0,"arraybuffer"),i=new Uint8Array(e);return s.h4.decode(i)}catch(t){throw t}}))}getLocationData(t){return h(this,void 0,void 0,(function*(){try{const e=yield this.get(t,void 0,"arraybuffer"),i=new Uint8Array(e);return r.mx.decode(i)}catch(t){throw t}}))}getMapObjectData(t){return h(this,void 0,void 0,(function*(){try{if(null!==t){const e=yield this.get(t,void 0,"arraybuffer"),i=new Uint8Array(e);return l.DO.decode(i)}}catch(t){throw t}}))}}const d=c},33:(t,e,i)=>{i.d(e,{A:()=>a});var o=i(1083);const a=class{constructor(){this.client=o.A.create({baseURL:"https://lightning.api.becomap.com",timeout:5e4,headers:{"Content-Type":"application/json",accept:" */*"}}),this.setupIntersepters()}setupIntersepters(){this.client.interceptors.request.use((t=>(this.accesstoken&&(t.headers.Authorization=`Bearer ${this.accesstoken}`),t)),(t=>this.handleError(t))),this.client.interceptors.response.use((t=>this.handleResponse(t)),(t=>this.handleError(t)))}handleError(t){return console.error("API Error:",t),Promise.reject(t)}handleResponse(t){return t}get(t,e,i="json"){return this.client.get(t,{params:e,responseType:i}).then((t=>t.data))}post(t,e){return this.client.post(t,e).then((t=>t.data))}}},7301:(t,e,i)=>{i.d(e,{A:()=>d});var o=i(33),a=i(7849);const s={AUTH_KEYS:"/api/v1/auth/sdk/generate-token",GET_SITE:t=>`/api/v1/sdk/site/${t}`,GET_FLOORS:(t,e)=>`/api/v1/sdk/floor/${t}/${e}`,GET_FLOOR_CONNECTIONS:t=>`/api/v1/sdk/connection/${t}`,GET_SITE_CATEGORY_ICONS:"/api/v1/category/get-icons",GET_SITE_EVENTS:t=>`/api/v1/sdk/event/${t}`,GET_SESSION:t=>`/api/v1/sdk/suggestions/get-session/${t}`,GET_SITE_SURVEY:t=>`/api/v1/sdk/questionnaire/${t}`,GET_EVENT_SUGGSSIONS:(t,e)=>`/api/v1/sdk/suggestions/get-event-suggestions/${t}/${e}`};var r=function(t,e,i,o){return new(i||(i=Promise))((function(a,s){function r(t){try{l(o.next(t))}catch(t){s(t)}}function n(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,n)}l((o=o.apply(t,e||[])).next())}))};class n extends o.A{constructor(){super()}static getInstance(){return n.instance||(n.instance=new n),n.instance}authenticate(t,e){return r(this,void 0,void 0,(function*(){const i={clientId:t,clientSecret:e};try{return yield this.post(s.AUTH_KEYS,i)}catch(t){throw new Error(`Authentication failed: ${t}`)}}))}}const l=n;var h=function(t,e,i,o){return new(i||(i=Promise))((function(a,s){function r(t){try{l(o.next(t))}catch(t){s(t)}}function n(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,n)}l((o=o.apply(t,e||[])).next())}))};class c extends o.A{constructor(){super(),this.authService=l.getInstance()}static getInstance(){return c.instance||(c.instance=new c),c.instance}getMapSite(t){return h(this,void 0,void 0,(function*(){try{return this.get(s.GET_SITE(t))}catch(t){throw t}}))}getSite(t,e,i){return h(this,void 0,void 0,(function*(){try{const o=yield this.authService.authenticate(t,e);this.accesstoken=o.accessToken;const s=yield this.getMapSite(i);return yield a.e.getSiteInstance(s)}catch(t){throw t}}))}getFloors(t,e){return h(this,void 0,void 0,(function*(){try{return this.get(s.GET_FLOORS(t,e))}catch(t){throw t}}))}getFloorConnections(t){return h(this,void 0,void 0,(function*(){try{return this.get(s.GET_FLOOR_CONNECTIONS(t))}catch(t){throw t}}))}getCategoryImages(){return h(this,void 0,void 0,(function*(){try{return this.get(s.GET_SITE_CATEGORY_ICONS)}catch(t){throw t}}))}getHappenings(t){return h(this,void 0,void 0,(function*(){try{return this.get(s.GET_SITE_EVENTS(t))}catch(t){throw t}}))}getSession(t){return h(this,void 0,void 0,(function*(){try{return this.post(s.GET_SESSION(t))}catch(t){throw t}}))}getSurvey(t){return h(this,void 0,void 0,(function*(){try{return this.get(s.GET_SITE_SURVEY(t))}catch(t){throw t}}))}getEventSuggestions(t,e,i){return h(this,void 0,void 0,(function*(){try{return yield this.post(s.GET_EVENT_SUGGSSIONS(t,e),i)}catch(t){throw t}}))}}const d=c},5446:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2722%27 height=%2722%27 fill=%27%23333%27 viewBox=%270 0 22 22%27%3E%3Cpath d=%27m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0%27/%3E%3C/svg%3E"},6694:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2722%27 height=%2722%27 fill=%27%2333b5e5%27 viewBox=%270 0 22 22%27%3E%3Cpath d=%27m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0%27/%3E%3C/svg%3E"},6117:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27 fill-rule=%27evenodd%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0%27/%3E%3C/svg%3E"},6311:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27 fill=%27%23fff%27 fill-rule=%27evenodd%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0%27/%3E%3C/svg%3E"},4420:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23333%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3C/svg%3E"},7035:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23333%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z%27/%3E%3C/svg%3E"},3470:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23333%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5%27/%3E%3C/svg%3E"},3490:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23333%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z%27/%3E%3C/svg%3E"},216:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23333%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27m10.5 14 4-8 4 8z%27/%3E%3Cpath fill=%27%23ccc%27 d=%27m10.5 16 4 8 4-8z%27/%3E%3C/svg%3E"},7695:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%2333b5e5%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3C/svg%3E"},2228:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%2333b5e5%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3C/svg%3E"},3737:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23666%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3Cpath fill=%27red%27 d=%27m14 5 1 1-9 9-1-1z%27/%3E%3C/svg%3E"},8460:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23999%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3Cpath fill=%27red%27 d=%27m14 5 1 1-9 9-1-1z%27/%3E%3C/svg%3E"},5796:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23aaa%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3Cpath fill=%27red%27 d=%27m14 5 1 1-9 9-1-1z%27/%3E%3C/svg%3E"},8869:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23e54e33%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3C/svg%3E"},9819:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23e58978%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3C/svg%3E"},557:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3C/svg%3E"},8164:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z%27/%3E%3C/svg%3E"},4665:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5%27/%3E%3C/svg%3E"},1413:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z%27/%3E%3C/svg%3E"},3913:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z%27/%3E%3C/svg%3E"},1907:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 fill=%27%23fff%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27m10.5 14 4-8 4 8z%27/%3E%3Cpath fill=%27%23ccc%27 d=%27m10.5 16 4 8 4-8z%27/%3E%3C/svg%3E"},6539:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27%3E%3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7%27/%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%272%27/%3E%3C/svg%3E"},4890:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z%27/%3E%3C/svg%3E"},3363:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5%27/%3E%3C/svg%3E"},7603:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z%27/%3E%3C/svg%3E"},4643:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z%27/%3E%3C/svg%3E"},8605:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27%3E%3Cpath d=%27m10.5 14 4-8 4 8z%27/%3E%3Cpath fill=%27%23ccc%27 d=%27m10.5 16 4 8 4-8z%27/%3E%3C/svg%3E"},7914:t=>{t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2788%27 height=%2723%27 fill=%27none%27%3E%3Cpath fill=%27%23000%27 fill-opacity=%27.4%27 fill-rule=%27evenodd%27 d=%27M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z%27/%3E%3Cpath fill=%27%23fff%27 d=%27m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z%27/%3E%3Cpath fill=%27%23e1e3e9%27 d=%27M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z%27/%3E%3Cpath d=%27M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z%27 style=%27fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001%27/%3E%3Cg style=%27stroke-width:1.12603545%27%3E%3Cpath d=%27M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668%27 style=%27color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto%27 transform=%27translate%2815.553 2.85%29scale%28.88807%29%27/%3E%3Cpath d=%27M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3%27 style=%27clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4%27 transform=%27translate%2815.553 2.85%29scale%28.88807%29%27/%3E%3Cpath d=%27M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z%27 style=%27clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4%27 transform=%27translate%2815.553 2.85%29scale%28.88807%29%27/%3E%3C/g%3E%3C/svg%3E"}}]);